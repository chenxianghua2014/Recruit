<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ttgis.recruit.Mapper.KcglMapper">
	<resultMap id="BaseResultMap" type="com.ttgis.recruit.domain.Kcgl">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<id column="KCGL_ID" property="kcglId" jdbcType="VARCHAR" />
		<result column="KCGL_NAME" property="kcglName" jdbcType="CHAR" />
		<result column="KCGL_DZ" property="kcglDz" jdbcType="CHAR" />
		<result column="KCGL_KSRQ" property="kcglKsrq" jdbcType="CHAR" />
		<result column="KCGL_KSSJ_START" property="kcglKssjStart"
			jdbcType="CHAR" />
		<result column="KCGL_KSSJ_END" property="kcglKssjEnd" jdbcType="CHAR" />
		<result column="KCGL_KCRL" property="kcglKcrl" jdbcType="NUMERIC" />
		<result column="KCGL_YBMS" property="kcglYbms" jdbcType="NUMERIC" />
		<result column="KCGL_SYRL" property="kcglSyrl" jdbcType="NUMERIC" />
		<result column="KCGL_KCZT" property="kcglKczt" jdbcType="CHAR" />
		<result column="KCGL_ADDTIME" property="kcglAddtime" jdbcType="TIMESTAMP" />
		<result column="KCGL_DELFLAG" property="kcglDelflag" jdbcType="NUMERIC" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		KCGL_ID, KCGL_NAME, KCGL_DZ, KCGL_KSRQ, KCGL_KSSJ_START,
		KCGL_KSSJ_END, KCGL_KCRL,
		KCGL_YBMS, KCGL_SYRL, KCGL_KCZT,
		KCGL_ADDTIME, KCGL_DELFLAG
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select KCGL_ID, KCGL_NAME, KCGL_DZ, KCGL_KSRQ, KCGL_KSSJ_START,
		KCGL_KSSJ_END, KCGL_KCRL, KCGL_KCZT,
		KCGL_ADDTIME, KCGL_DELFLAG,
		(select count(distinct(BMGL_SFZH)) from BMGL where BMGL_KCGL_ID =
		KCGL_ID) KCGL_YBMS,
		(KCGL_KCRL - (select count(distinct(BMGL_SFZH))
		from BMGL where BMGL_KCGL_ID = KCGL_ID)) KCGL_SYRL
		from KCGL
		where
		KCGL_ID =
		#{kcglId,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from KCGL
		where KCGL_ID = #{kcglId,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.ttgis.recruit.domain.Kcgl">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into KCGL (KCGL_ID, KCGL_NAME, KCGL_DZ,
		KCGL_KSRQ,
		KCGL_KSSJ_START, KCGL_KSSJ_END,
		KCGL_KCRL, KCGL_YBMS, KCGL_SYRL,
		KCGL_KCZT, KCGL_ADDTIME, KCGL_DELFLAG
		)
		values
		(#{kcglId,jdbcType=VARCHAR}, #{kcglName,jdbcType=CHAR},
		#{kcglDz,jdbcType=CHAR},
		#{kcglKsrq,jdbcType=CHAR},
		#{kcglKssjStart,jdbcType=CHAR}, #{kcglKssjEnd,jdbcType=CHAR},
		#{kcglKcrl,jdbcType=NUMERIC}, #{kcglYbms,jdbcType=NUMERIC},
		#{kcglSyrl,jdbcType=NUMERIC},
		#{kcglKczt,jdbcType=CHAR},
		#{kcglAddtime,jdbcType=TIMESTAMP}, #{kcglDelflag,jdbcType=NUMERIC}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.ttgis.recruit.domain.Kcgl">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into KCGL
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="kcglId != null">
				KCGL_ID,
			</if>
			<if test="kcglName != null">
				KCGL_NAME,
			</if>
			<if test="kcglDz != null">
				KCGL_DZ,
			</if>
			<if test="kcglKsrq != null">
				KCGL_KSRQ,
			</if>
			<if test="kcglKssjStart != null">
				KCGL_KSSJ_START,
			</if>
			<if test="kcglKssjEnd != null">
				KCGL_KSSJ_END,
			</if>
			<if test="kcglKcrl != null">
				KCGL_KCRL,
			</if>
			<if test="kcglYbms != null">
				KCGL_YBMS,
			</if>
			<if test="kcglSyrl != null">
				KCGL_SYRL,
			</if>
			<if test="kcglKczt != null">
				KCGL_KCZT,
			</if>
			<if test="kcglAddtime != null">
				KCGL_ADDTIME,
			</if>
			<if test="kcglDelflag != null">
				KCGL_DELFLAG,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="kcglId != null">
				#{kcglId,jdbcType=VARCHAR},
			</if>
			<if test="kcglName != null">
				#{kcglName,jdbcType=CHAR},
			</if>
			<if test="kcglDz != null">
				#{kcglDz,jdbcType=CHAR},
			</if>
			<if test="kcglKsrq != null">
				#{kcglKsrq,jdbcType=CHAR},
			</if>
			<if test="kcglKssjStart != null">
				#{kcglKssjStart,jdbcType=CHAR},
			</if>
			<if test="kcglKssjEnd != null">
				#{kcglKssjEnd,jdbcType=CHAR},
			</if>
			<if test="kcglKcrl != null">
				#{kcglKcrl,jdbcType=NUMERIC},
			</if>
			<if test="kcglYbms != null">
				#{kcglYbms,jdbcType=NUMERIC},
			</if>
			<if test="kcglSyrl != null">
				#{kcglSyrl,jdbcType=NUMERIC},
			</if>
			<if test="kcglKczt != null">
				#{kcglKczt,jdbcType=CHAR},
			</if>
			<if test="kcglAddtime != null">
				#{kcglAddtime,jdbcType=TIMESTAMP},
			</if>
			<if test="kcglDelflag != null">
				#{kcglDelflag,jdbcType=NUMERIC},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.ttgis.recruit.domain.Kcgl">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update KCGL
		<set>
			<if test="kcglName != null">
				KCGL_NAME = #{kcglName,jdbcType=CHAR},
			</if>
			<if test="kcglDz != null">
				KCGL_DZ = #{kcglDz,jdbcType=CHAR},
			</if>
			<if test="kcglKsrq != null">
				KCGL_KSRQ = #{kcglKsrq,jdbcType=CHAR},
			</if>
			<if test="kcglKssjStart != null">
				KCGL_KSSJ_START = #{kcglKssjStart,jdbcType=CHAR},
			</if>
			<if test="kcglKssjEnd != null">
				KCGL_KSSJ_END = #{kcglKssjEnd,jdbcType=CHAR},
			</if>
			<if test="kcglKcrl != null">
				KCGL_KCRL = #{kcglKcrl,jdbcType=NUMERIC},
			</if>
			<if test="kcglYbms != null">
				KCGL_YBMS = #{kcglYbms,jdbcType=NUMERIC},
			</if>
			<if test="kcglSyrl != null">
				KCGL_SYRL = #{kcglSyrl,jdbcType=NUMERIC},
			</if>
			<if test="kcglKczt != null">
				KCGL_KCZT = #{kcglKczt,jdbcType=CHAR},
			</if>
			<if test="kcglAddtime != null">
				KCGL_ADDTIME = #{kcglAddtime,jdbcType=TIMESTAMP},
			</if>
			<if test="kcglDelflag != null">
				KCGL_DELFLAG = #{kcglDelflag,jdbcType=NUMERIC},
			</if>
		</set>
		where KCGL_ID = #{kcglId,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.ttgis.recruit.domain.Kcgl">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update KCGL
		set KCGL_NAME = #{kcglName,jdbcType=CHAR},
		KCGL_DZ =
		#{kcglDz,jdbcType=CHAR},
		KCGL_KSRQ = #{kcglKsrq,jdbcType=CHAR},
		KCGL_KSSJ_START = #{kcglKssjStart,jdbcType=CHAR},
		KCGL_KSSJ_END =
		#{kcglKssjEnd,jdbcType=CHAR},
		KCGL_KCRL = #{kcglKcrl,jdbcType=NUMERIC},
		KCGL_YBMS = #{kcglYbms,jdbcType=NUMERIC},
		KCGL_SYRL =
		#{kcglSyrl,jdbcType=NUMERIC},
		KCGL_KCZT = #{kcglKczt,jdbcType=CHAR},
		KCGL_ADDTIME = #{kcglAddtime,jdbcType=TIMESTAMP},
		KCGL_DELFLAG =
		#{kcglDelflag,jdbcType=NUMERIC}
		where KCGL_ID =
		#{kcglId,jdbcType=VARCHAR}
	</update>

	<select id="selectCount" resultType="java.lang.Integer"
		parameterType="com.ttgis.recruit.domain.QueryKcgl">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(*)
		from KCGL
		where KCGL_DELFLAG=1
		<trim suffixOverrides=",">
			<if test="kcglName != null and kcglName != ''">
				and KCGL_NAME like '%${kcglName}%'
			</if>
			<if test="kcglKczt != null and kcglKczt != ''">
				and KCGL_KCZT like '%${kcglKczt}%'
			</if>
			<if test="kcglKsrq != null and kcglKsrq != ''">
				and KCGL_KSRQ like '%${kcglKsrq}%'
			</if>
			<if test="kcglKssjStart != null and kcglKssjStart != ''">
				and KCGL_KSSJ_START like '%${kcglKssjStart}%'
			</if>
			<if test="kcglKssjEnd != null and kcglKssjEnd != ''">
				and KCGL_KSSJ_END like '%${kcglKssjEnd}%'
			</if>
		</trim>
	</select>
	<select id="selectByWhere" resultMap="BaseResultMap"
		parameterType="com.ttgis.recruit.domain.QueryKcgl">
		select KCGL_ID, KCGL_NAME, KCGL_DZ, KCGL_KSRQ, KCGL_KSSJ_START,
		KCGL_KSSJ_END, KCGL_KCRL, KCGL_KCZT,
		KCGL_ADDTIME, KCGL_DELFLAG,
		(select count(distinct(BMGL_SFZH)) from BMGL where BMGL_KCGL_ID =
		KCGL_ID) KCGL_YBMS,
		(KCGL_KCRL - (select count(distinct(BMGL_SFZH))
		from BMGL where BMGL_KCGL_ID = KCGL_ID)) KCGL_SYRL
		from (select top
		${currentPageSize} *
		from (select
		top(${pageNum}*${pageSize}) * from
		KCGL T
		where KCGL_DELFLAG=1
		<trim suffixOverrides=",">
			<if test="kcglName != null and kcglName != ''">
				and KCGL_NAME like '%${kcglName}%'
			</if>
			<if test="kcglKczt != null and kcglKczt != ''">
				and KCGL_KCZT like '%${kcglKczt}%'
			</if>
			<if test="kcglKsrq != null and kcglKsrq != ''">
				and KCGL_KSRQ like '%${kcglKsrq}%'
			</if>
			<if test="kcglKssjStart != null and kcglKssjStart != ''">
				and KCGL_KSSJ_START like '%${kcglKssjStart}%'
			</if>
			<if test="kcglKssjEnd != null and kcglKssjEnd != ''">
				and KCGL_KSSJ_END like '%${kcglKssjEnd}%'
			</if>
			
		</trim>
		order by T.KCGL_KSRQ desc ) as t1
		order by KCGL_KSRQ asc) as t2
		order by
		KCGL_KSRQ desc
	</select>
	<select id="queryKcgl" resultMap="BaseResultMap">
		select * from KCGL where
		KCGL_KCZT = '开放'

	</select>
	<select id="queryKcrlByKcglName" resultType="java.lang.Integer"
		parameterType="java.lang.String">
		select KCGL_KCRL from KCGL where KCGL_ID =
		#{kcglName,jdbcType=CHAR}
	</select>
</mapper>