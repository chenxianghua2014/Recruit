<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ttgis.recruit.Mapper.ArticleMapper" >
  <resultMap id="BaseResultMap" type="com.ttgis.recruit.domain.Article" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ARTICLE_ID" property="articleId" jdbcType="VARCHAR" />
    <result column="LTBQ_ID" property="ltbqId" jdbcType="VARCHAR" />
    <result column="ARTICLE_AUTHOR" property="articleAuthor" jdbcType="VARCHAR" />
    <result column="ARTICLE_VIEWER" property="articleViewer" jdbcType="VARCHAR" />
    <result column="ARTICLE_FBSJ" property="articleFbsj" jdbcType="TIMESTAMP" />
    <result column="ARTICLE_TYPE" property="articleType" jdbcType="VARCHAR" />
    <result column="ARTICLE_ADDTIME" property="articleAddtime" jdbcType="TIMESTAMP" />
    <result column="ARTICLE_DELFLAG" property="articleDelflag" jdbcType="NUMERIC" />
    <result column="ARTICLE_TITLE" property="articleTitle" jdbcType="VARCHAR" />
    <result column="ARTICLE_FBR" property="articleFbr" jdbcType="VARCHAR" />
    <result column="ARTICLE_CONTENT" property="articleContent" jdbcType="VARCHAR" />
    <result column="ARTICLE_REASON" property="articleReason" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="com.ttgis.recruit.domain.Article" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="ARTICLE_CONTENT" property="articleContent" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ARTICLE_ID, LTBQ_ID, ARTICLE_AUTHOR, ARTICLE_VIEWER, ARTICLE_FBSJ, ARTICLE_TYPE, ARTICLE_CONTENT,
    (Select CONVERT(VARCHAR(100), ARTICLE_ADDTIME, 20) ) ADDTIME , ARTICLE_DELFLAG, ARTICLE_TITLE,ARTICLE_FBR,ARTICLE_REASON
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ARTICLE_CONTENT
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from ARTICLE
    where ARTICLE_ID = #{articleId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from ARTICLE
    where ARTICLE_ID = #{articleId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.ttgis.recruit.domain.Article" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ARTICLE (ARTICLE_ID, LTBQ_ID, ARTICLE_AUTHOR, 
      ARTICLE_VIEWER, ARTICLE_FBSJ, ARTICLE_TYPE, 
      ARTICLE_ADDTIME, ARTICLE_DELFLAG, ARTICLE_TITLE,
      ARTICLE_CONTENT,ARTICLE_REASON)
    values (#{articleId,jdbcType=VARCHAR}, #{ltbqId,jdbcType=VARCHAR}, #{articleAuthor,jdbcType=VARCHAR}, 
      #{articleViewer,jdbcType=VARCHAR}, #{articleFbsj,jdbcType=TIMESTAMP}, #{articleType,jdbcType=VARCHAR}, 
      #{articleAddtime,jdbcType=TIMESTAMP}, #{articleDelflag,jdbcType=NUMERIC}, #{articleTitle,jdbcType=VARCHAR}, 
      #{articleContent,jdbcType=LONGVARCHAR}, #{articleReason,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.ttgis.recruit.domain.Article" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ARTICLE
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="articleId != null" >
        ARTICLE_ID,
      </if>
      <if test="ltbqId != null" >
        LTBQ_ID,
      </if>
      <if test="articleAuthor != null" >
        ARTICLE_AUTHOR,
      </if>
      <if test="articleViewer != null" >
        ARTICLE_VIEWER,
      </if>
      <if test="articleFbsj != null" >
        ARTICLE_FBSJ,
      </if>
      <if test="articleType != null" >
        ARTICLE_TYPE,
      </if>
      <if test="articleAddtime != null" >
        ARTICLE_ADDTIME,
      </if>
      <if test="articleDelflag != null" >
        ARTICLE_DELFLAG,
      </if>
      <if test="articleTitle != null" >
        ARTICLE_TITLE,
      </if>
      <if test="articleContent != null" >
        ARTICLE_CONTENT,
      </if>
      <if test="articleFbr != null" >
        ARTICLE_FBR,
      </if>
      <if test="articleReason != null" >
        ARTICLE_REASON,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="articleId != null" >
        #{articleId,jdbcType=VARCHAR},
      </if>
      <if test="ltbqId != null" >
        #{ltbqId,jdbcType=VARCHAR},
      </if>
      <if test="articleAuthor != null" >
        #{articleAuthor,jdbcType=VARCHAR},
      </if>
      <if test="articleViewer != null" >
        #{articleViewer,jdbcType=VARCHAR},
      </if>
      <if test="articleFbsj != null" >
        #{articleFbsj,jdbcType=TIMESTAMP},
      </if>
      <if test="articleType != null" >
        #{articleType,jdbcType=VARCHAR},
      </if>
      <if test="articleAddtime != null" >
        #{articleAddtime,jdbcType=TIMESTAMP},
      </if>
      <if test="articleDelflag != null" >
        #{articleDelflag,jdbcType=NUMERIC},
      </if>
      <if test="articleTitle != null" >
        #{articleTitle,jdbcType=VARCHAR},
      </if>
      <if test="articleContent != null" >
        #{articleContent,jdbcType=LONGVARCHAR},
      </if>
      <if test="articleContent != null" >
        #{articleFbr,jdbcType=VARCHAR},
      </if>
      <if test="articleReason != null" >
         #{articleReason,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ttgis.recruit.domain.Article" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ARTICLE
    <set >
      <if test="ltbqId != null" >
        LTBQ_ID = #{ltbqId,jdbcType=VARCHAR},
      </if>
      <if test="articleAuthor != null" >
        ARTICLE_AUTHOR = #{articleAuthor,jdbcType=VARCHAR},
      </if>
      <if test="articleViewer != null" >
        ARTICLE_VIEWER = #{articleViewer,jdbcType=VARCHAR},
      </if>
      <if test="articleFbsj != null" >
        ARTICLE_FBSJ = #{articleFbsj,jdbcType=TIMESTAMP},
      </if>
      <if test="articleType != null" >
        ARTICLE_TYPE = #{articleType,jdbcType=VARCHAR},
      </if>
      <if test="articleAddtime != null" >
        ARTICLE_ADDTIME = #{articleAddtime,jdbcType=TIMESTAMP},
      </if>
      <if test="articleDelflag != null" >
        ARTICLE_DELFLAG = #{articleDelflag,jdbcType=NUMERIC},
      </if>
      <if test="articleTitle != null" >
        ARTICLE_TITLE = #{articleTitle,jdbcType=VARCHAR},
      </if>
      <if test="articleContent != null" >
        ARTICLE_CONTENT = #{articleContent,jdbcType=LONGVARCHAR},
      </if>
      <if test="articleContent != null" >
        ARTICLE_FBR = #{articleFbr,jdbcType=LONGVARCHAR},
      </if>
       <if test="articleReason != null" >
          ARTICLE_REASON = #{articleReason,jdbcType=VARCHAR},
      </if>
    </set>
    where ARTICLE_ID = #{articleId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.ttgis.recruit.domain.Article" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ARTICLE
    set LTBQ_ID = #{ltbqId,jdbcType=VARCHAR},
      ARTICLE_AUTHOR = #{articleAuthor,jdbcType=VARCHAR},
      ARTICLE_VIEWER = #{articleViewer,jdbcType=VARCHAR},
      ARTICLE_FBSJ = #{articleFbsj,jdbcType=TIMESTAMP},
      ARTICLE_TYPE = #{articleType,jdbcType=VARCHAR},
      ARTICLE_ADDTIME = #{articleAddtime,jdbcType=TIMESTAMP},
      ARTICLE_DELFLAG = #{articleDelflag,jdbcType=NUMERIC},
      ARTICLE_TITLE = #{articleTitle,jdbcType=VARCHAR},
      ARTICLE_CONTENT = #{articleContent,jdbcType=LONGVARCHAR},
        ARTICLE_REASON = #{articleReason,jdbcType=VARCHAR}
    where ARTICLE_ID = #{articleId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ttgis.recruit.domain.Article" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update ARTICLE
    set LTBQ_ID = #{ltbqId,jdbcType=VARCHAR},
      ARTICLE_AUTHOR = #{articleAuthor,jdbcType=VARCHAR},
      ARTICLE_VIEWER = #{articleViewer,jdbcType=VARCHAR},
      ARTICLE_FBSJ = #{articleFbsj,jdbcType=TIMESTAMP},
      ARTICLE_TYPE = #{articleType,jdbcType=VARCHAR},
      ARTICLE_ADDTIME = #{articleAddtime,jdbcType=TIMESTAMP},
      ARTICLE_DELFLAG = #{articleDelflag,jdbcType=NUMERIC},
      ARTICLE_TITLE = #{articleTitle,jdbcType=VARCHAR},
      ARTICLE_FBR = #{articleFbr,jdbcType=VARCHAR}
      ARTICLE_CONTENT= #{articleContent,jdbcType=LONGVARCHAR},
        ARTICLE_REASON = #{articleReason,jdbcType=VARCHAR}
    where ARTICLE_ID = #{articleId,jdbcType=VARCHAR}
  </update>
  <select id="selectCount" resultType="java.lang.Integer"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(*)
		from ARTICLE
		where ARTICLE_DELFLAG=1 and ARTICLE_VIEWER != '待审核'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
			<if test="ltbqName != null and ltbqName  != ''">
				and ARTICLE_TITLE like '%${ltbqName}%' 
			</if>
			<if test="ltbqId != null and ltbqId  != ''">
			or  ARTICLE_ID in
			(select ARTICLE_ID from LTBQ_ARTICLE where LTBQ_ID =#{ltbqId,jdbcType=VARCHAR} )
			</if>
		</trim>
	</select>
	<select id="selectByWhere" resultMap="BaseResultMap"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		select ARTICLE_ID, LTBQ_ID, ARTICLE_AUTHOR, ARTICLE_VIEWER, ARTICLE_FBSJ, ARTICLE_TYPE, ARTICLE_CONTENT,
    (Select CONVERT(VARCHAR(100), ARTICLE_ADDTIME, 20) ) ADDTIME , ARTICLE_DELFLAG, ARTICLE_TITLE,ARTICLE_FBR,ARTICLE_REASON
		from (select top ${currentPageSize} *
		from (select
		top(${pageNum}*${pageSize}) * from ARTICLE T where
		ARTICLE_DELFLAG=1 and ARTICLE_VIEWER != '待审核'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
			<if test="ltbqName != null and ltbqName  != ''">
				and ARTICLE_TITLE like '%${ltbqName}%' 
			</if>
			<if test="ltbqId != null and ltbqId  != ''">
			or  ARTICLE_ID in
			(select ARTICLE_ID from LTBQ_ARTICLE where LTBQ_ID =#{ltbqId,jdbcType=VARCHAR} )
     		
			</if>
		</trim>
		order by T.ARTICLE_ADDTIME ASC ) as t1
		order by ARTICLE_ADDTIME DESC) as t2
		order by
		ARTICLE_ADDTIME ASC
	</select>
	<select id="queryArticleMark" resultMap="BaseResultMap"
		parameterType="com.ttgis.recruit.domain.PageCondition">
	select ARTICLE_ID, LTBQ_ID, ARTICLE_AUTHOR,ARTICLE_CONTENT,substring(ARTICLE_CONTENT,1,200) CONTENT, ARTICLE_VIEWER, (Select CONVERT(VARCHAR(100), ARTICLE_ADDTIME, 20) ) FBSJ, ARTICLE_TYPE, 
    ARTICLE_ADDTIME, ARTICLE_DELFLAG, ARTICLE_TITLE,ARTICLE_FBR,ARTICLE_REASON from ARTICLE
	where ARTICLE_FBR=#{articleFbr,jdbcType=VARCHAR}
	
	</select>
	
	<select id="selectCount1" resultType="java.lang.Integer"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(*)
		from ARTICLE
		where ARTICLE_DELFLAG=1 and ARTICLE_VIEWER = '待审核'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
		</trim>
	</select>
	<select id="selectByWhere1" resultMap="BaseResultMap"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		select *
		from (select top ${currentPageSize} *
		from (select
		top(${pageNum}*${pageSize}) * from ARTICLE T where
		ARTICLE_DELFLAG=1 and ARTICLE_VIEWER = '待审核'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
		</trim>
		order by T.ARTICLE_ADDTIME ASC ) as t1
		order by ARTICLE_ADDTIME DESC) as t2
		order by
		ARTICLE_ADDTIME ASC
	</select>
		<!--职业体验前台 分页查询-->
	 <select id="LoadZytyDataCount" resultType="java.lang.Integer"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(*)
		from ARTICLE
		where ARTICLE_DELFLAG=1 and ARTICLE_VIEWER = '通过'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleAuthor != null and articleAuthor != ''">
				and ARTICLE_AUTHOR like '%${articleAuthor}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
			<if test="ltbqName != null and ltbqName  != ''">
				and ARTICLE_TITLE like '%${ltbqName}%' 
			</if>
			<if test="ltbqId != null and ltbqId  != ''">
			or  ARTICLE_ID in
			(select ARTICLE_ID from LTBQ_ARTICLE where LTBQ_ID =#{ltbqId,jdbcType=VARCHAR} )
			</if>
		</trim>
	</select>
	<select id="LoadZytyData" resultMap="BaseResultMap"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		select ARTICLE_ID, LTBQ_ID, ARTICLE_AUTHOR, ARTICLE_VIEWER, ARTICLE_FBSJ, ARTICLE_TYPE, ARTICLE_CONTENT,substring(ARTICLE_CONTENT,1,200) CONTENT,
    (Select CONVERT(VARCHAR(100), ARTICLE_ADDTIME, 20) ) ADDTIME , ARTICLE_DELFLAG, ARTICLE_TITLE,ARTICLE_FBR,ARTICLE_REASON,
    (select count(*) from ARTICLE_REVIEW where ARTICLE_ID = t2.ARTICLE_ID) pls
		from (select top ${currentPageSize} *
		from (select
		top(${pageNum}*${pageSize}) * from ARTICLE T where
		ARTICLE_DELFLAG=1 and ARTICLE_VIEWER = '通过'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleAuthor != null and articleAuthor != ''">
				and ARTICLE_AUTHOR like '%${articleAuthor}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
			<if test="ltbqName != null and ltbqName  != ''">
				and ARTICLE_TITLE like '%${ltbqName}%' 
			</if>
			<if test="ltbqId != null and ltbqId  != ''">
			and  ARTICLE_ID in
			(select ARTICLE_ID from LTBQ_ARTICLE where LTBQ_ID =#{ltbqId,jdbcType=VARCHAR} )
     		
			</if>
		</trim>
		order by T.ARTICLE_ADDTIME ASC ) as t1
		order by ARTICLE_ADDTIME DESC) as t2
		order by
		ARTICLE_ADDTIME ASC
	</select>
		<!--热门博文   前 台    分页查询-->
	 <select id="LoadRmbwDataCount" resultType="java.lang.Integer"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select count(*)
		from ARTICLE
		where ARTICLE_DELFLAG=1 and ARTICLE_VIEWER = '通过'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleAuthor != null and articleAuthor != ''">
				and ARTICLE_AUTHOR like '%${articleAuthor}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
			<if test="ltbqName != null and ltbqName  != ''">
				and ARTICLE_TITLE like '%${ltbqName}%' 
			</if>
			<if test="ltbqId != null and ltbqId  != ''">
			or ARTICLE_ID in
			(select ARTICLE_ID from LTBQ_ARTICLE where LTBQ_ID =#{ltbqId,jdbcType=VARCHAR} )
			</if>
		</trim>
	</select>
	<select id="LoadRmbwData" resultMap="BaseResultMap"
		parameterType="com.ttgis.recruit.domain.QueryArticle">
		select ARTICLE_ID, LTBQ_ID, ARTICLE_AUTHOR, ARTICLE_VIEWER, ARTICLE_FBSJ, ARTICLE_TYPE,ARTICLE_CONTENT, substring(ARTICLE_CONTENT,1,200) CONTENT,
    (Select CONVERT(VARCHAR(100), ARTICLE_ADDTIME, 20) ) ADDTIME , ARTICLE_DELFLAG, ARTICLE_TITLE,ARTICLE_FBR,ARTICLE_REASON,
    (select count(*) from ARTICLE_REVIEW where ARTICLE_ID = t2.ARTICLE_ID) pls
		from (select top ${currentPageSize} *
		from (select
		top(${pageNum}*${pageSize}) * from ARTICLE T where
		ARTICLE_DELFLAG=1 and ARTICLE_VIEWER = '通过'
		<trim suffixOverrides=",">
			<if test="articleTitle != null and articleTitle != ''">
				and ARTICLE_TITLE like '%${articleTitle}%'
			</if>
			<if test="articleAuthor != null and articleAuthor != ''">
				and ARTICLE_AUTHOR like '%${articleAuthor}%'
			</if>
			<if test="articleType != null and articleType != ''">
				and ARTICLE_TYPE like '%${articleType}%'
			</if>
			<if test="ltbqName != null and ltbqName  != ''">
				and ARTICLE_TITLE like '%${ltbqName}%' 
			</if>
			<if test="ltbqId != null and ltbqId  != ''">
			or  ARTICLE_ID in
			(select ARTICLE_ID from LTBQ_ARTICLE where LTBQ_ID =#{ltbqId,jdbcType=VARCHAR} )
     		
			</if>
		</trim>
		order by T.ARTICLE_ADDTIME ASC ) as t1
		order by ARTICLE_ADDTIME DESC) as t2
		order by
		ARTICLE_ADDTIME ASC
	</select>
	<select id="articleDshCount" resultType="java.lang.Integer">
	select count(*) from ARTICLE where ARTICLE_VIEWER = '待审核'
	
	</select>
	<select id="queryarticleYgfxList" resultMap="BaseResultMap">
		select * from ARTICLE WHERE ARTICLE_TYPE = '经验博文（员工）'
	</select>
	<select id="queryarticleXrfxList" resultMap="BaseResultMap">
		select * from ARTICLE WHERE ARTICLE_TYPE = '经验博文（新人）'
	</select>
</mapper>