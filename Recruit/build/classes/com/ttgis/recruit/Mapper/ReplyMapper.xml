<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ttgis.recruit.Mapper.ReplyMapper" >
  <resultMap id="BaseResultMap" type="com.ttgis.recruit.domain.Reply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="REPLY_ID" property="replyId" jdbcType="VARCHAR" />
    <result column="REPLY_ADDTIME" property="replyAddtime" jdbcType="TIMESTAMP" />
    <result column="REPLY_DELFLAG" property="replyDelflag" jdbcType="NUMERIC" />
    <result column="REPLY_NR" property="replyNr" jdbcType="VARCHAR" />
    <result column="REPLY_NAME" property="replyName" jdbcType="VARCHAR" />
    <result column="REVIEW_ID" property="reviewId" jdbcType="VARCHAR" />
    <result column="ARTICLE_REVIEW_ID" property="articleReviewId" jdbcType="VARCHAR" />
    <result column="XQQZ_REVIEW_ID" property="xqqzReviewId" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    REPLY_ID, REPLY_ADDTIME, REPLY_DELFLAG, REPLY_NR, REPLY_NAME, REVIEW_ID, 
    ARTICLE_REVIEW_ID, XQQZ_REVIEW_ID
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from REPLY
    where REPLY_ID = #{replyId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from REPLY
    where REPLY_ID = #{replyId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.ttgis.recruit.domain.Reply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into REPLY ( REPLY_ID, REPLY_ADDTIME, REPLY_DELFLAG, REPLY_NR, REPLY_NAME, REVIEW_ID, 
    ARTICLE_REVIEW_ID, XQQZ_REVIEW_ID
      )
    values (#{replyId,jdbcType=VARCHAR}, #{replyAddtime,jdbcType=TIMESTAMP}, #{replyDelflag,jdbcType=NUMERIC},
    	#{replyNr,jdbcType=VARCHAR}, #{replyName,jdbcType=VARCHAR},#{reviewId,jdbcType=VARCHAR},
      #{articleReviewId,jdbcType=VARCHAR}, #{xqqzReviewId,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.ttgis.recruit.domain.Reply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into REPLY
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="replyId != null" >
        REPLY_ID,
      </if>
       <if test="replyAddtime != null" >
        REPLY_ADDTIME,
      </if>
      <if test="replyDelflag != null" >
        REPLY_DELFLAG,
      </if>
      <if test="replyNr != null" >
        REPLY_NR,
      </if>
      <if test="replyName != null" >
        REPLY_NAME,
      </if>
      <if test="reviewId != null" >
        REVIEW_ID,
      </if>
      <if test="articleReviewId != null" >
        ARTICLE_REVIEW_ID,
      </if>
      <if test="xqqzReviewId != null" >
        XQQZ_REVIEW_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="replyId != null" >
        #{replyId,jdbcType=VARCHAR},
      </if>
      <if test="replyAddtime != null" >
        #{replyAddtime,jdbcType=TIMESTAMP},
      </if>
      <if test="replyDelflag != null" >
        #{replyDelflag,jdbcType=NUMERIC},
      </if>
      <if test="replyNr != null" >
        #{replyNr,jdbcType=VARCHAR},
      </if>
      <if test="replyName != null" >
        #{replyName,jdbcType=VARCHAR},
      </if>
       <if test="reviewId != null" >
       #{reviewId,jdbcType=VARCHAR},
      </if>
      <if test="articleReviewId != null" >
        #{articleReviewId,jdbcType=VARCHAR},
      </if>
      <if test="xqqzReviewId != null" >
        #{xqqzReviewId,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.ttgis.recruit.domain.Reply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update REPLY
    <set >
      <if test="replyId != null" >
        REPLY_ID = #{replyId,jdbcType=VARCHAR},
      </if>
      <if test="replyAddtime != null" >
        REPLY_ADDTIME = #{replyAddtime,jdbcType=TIMESTAMP},
      </if>
      <if test="replyDelflag != null" >
        REPLY_DELFLAG = #{replyDelflag,jdbcType=NUMERIC},
      </if>
       <if test="replyNr != null" >
        REPLY_NR = #{replyNr,jdbcType=VARCHAR},
      </if>
      <if test="replyName != null" >
        REPLY_NAME = #{replyName,jdbcType=VARCHAR},
      </if>
       <if test="reviewId != null" >
       REVIEW_ID = #{reviewId,jdbcType=VARCHAR},
      </if>
      <if test="articleReviewId != null" >
        ARTICLE_REVIEW_ID = #{articleReviewId,jdbcType=VARCHAR},
      </if>
      <if test="xqqzReviewId != null" >
        XQQZ_REVIEW_ID = #{xqqzReviewId,jdbcType=VARCHAR},
      </if>
      
    </set>
    where REPLY_ID = #{replyId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="com.ttgis.recruit.domain.Reply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update REPLY
    set REPLY_ID = #{replyId,jdbcType=VARCHAR},
        REPLY_NR = #{replyNr,jdbcType=VARCHAR},
        REPLY_NAME = #{replyName,jdbcType=VARCHAR},
     	 REVIEW_ID = #{reviewId,jdbcType=VARCHAR},
      ARTICLE_REVIEW_ID = #{articleReviewId,jdbcType=VARCHAR},
      XQQZ_REVIEW_ID = #{xqqzReviewId,jdbcType=VARCHAR},
      REPLY_ADDTIME = #{replyAddtime,jdbcType=TIMESTAMP},
      REPLY_DELFLAG = #{replyDelflag,jdbcType=NUMERIC},
    where REPLY_ID = #{replyId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.ttgis.recruit.domain.Reply" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update REPLY
    set  REPLY_ID = #{replyId,jdbcType=VARCHAR},
        REPLY_NR = #{replyNr,jdbcType=VARCHAR},
        REPLY_NAME = #{replyName,jdbcType=VARCHAR},
     	 REVIEW_ID = #{reviewId,jdbcType=VARCHAR},
      ARTICLE_REVIEW_ID = #{articleReviewId,jdbcType=VARCHAR},
      XQQZ_REVIEW_ID = #{xqqzReviewId,jdbcType=VARCHAR},
      REPLY_ADDTIME = #{replyAddtime,jdbcType=TIMESTAMP},
      REPLY_DELFLAG = #{replyDelflag,jdbcType=NUMERIC},
    where REPLY_ID = #{replyId,jdbcType=VARCHAR}
  </update>
  
   <select id="htBbsReviewReplyCount" resultType="java.lang.Integer" parameterType="com.ttgis.recruit.domain.QueryReply">
		select count(*)
		from REPLY
		where REPLY_DELFLAG = 1
		<trim suffixOverrides=",">
			<if test="reviewId != null and reviewId != ''">
				and REVIEW_ID = #{reviewId,jdbcType=VARCHAR}
			</if>
			 <if test="replyNr != null and replyNr != ''">
		        and REPLY_NR like '%${replyNr}%' 
		      </if>
		      <if test="replyName != null and replyName != ''">
		         and REPLY_NAME like '%${replyName}%' 
		      </if>
		</trim>
	</select>
	<select id="htBbsReviewReplyData" resultMap="BaseResultMap" parameterType="com.ttgis.recruit.domain.QueryReply">
		select  REPLY_ID, REPLY_ADDTIME,(Select CONVERT(VARCHAR(100), REPLY_ADDTIME, 20)) hfsj, REPLY_DELFLAG, REPLY_NR, REPLY_NAME, REVIEW_ID, 
    ARTICLE_REVIEW_ID, XQQZ_REVIEW_ID
		from (select top ${currentPageSize} *
		from (select
		top(${pageNum}*${pageSize}) * from REPLY T where
		 REPLY_DELFLAG = 1
		<trim suffixOverrides=",">
			<if test="reviewId != null and reviewId != ''">
				and REVIEW_ID = #{reviewId,jdbcType=VARCHAR}
			</if>
			 <if test="replyNr != null and replyNr != ''">
		        and REPLY_NR like '%${replyNr}%' 
		      </if>
		      <if test="replyName != null and replyName != ''">
		         and REPLY_NAME like '%${replyName}%' 
		      </if>
		</trim>
		order by T.REPLY_ADDTIME ASC ) as t1
		order by REPLY_ADDTIME DESC) as t2
		order by
		REPLY_ADDTIME ASC
	</select>
	
	<select id="qtGetReplyByReviewId" parameterType="java.lang.String" resultMap="BaseResultMap">
	select  REPLY_ID, REPLY_ADDTIME,(Select CONVERT(VARCHAR(100), REPLY_ADDTIME, 20)) hfsj, REPLY_DELFLAG, REPLY_NR, REPLY_NAME, REVIEW_ID, 
    ARTICLE_REVIEW_ID, XQQZ_REVIEW_ID
    from REPLY where REVIEW_ID = #{reviewId,jdbcType=VARCHAR}
    order by REPLY_ADDTIME ASC
	</select>
	
	<delete id="delhtBbsReviewReplyByReviewId" parameterType="java.lang.String">
	delete from REPLY where REVIEW_ID = #{reviewId,jdbcType=VARCHAR}
	</delete>
</mapper>